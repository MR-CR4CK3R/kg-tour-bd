{% extends "layout.html" %}
{% block content %}
<div class="text-center mb-5 mt-4">
    <h2 class="text-neon">AUTHENTICATION</h2>
    <p class="text-white">Welcome to Khelo Gamers BD</p>
</div>

<div class="card card-custom p-4">
    <ul class="nav nav-pills nav-fill mb-4" id="pills-tab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link {% if not step or step == 'init' %}active{% endif %}" id="pills-login-tab" data-bs-toggle="pill" data-bs-target="#login-tab" type="button">LOGIN</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link {% if step == 'verify_otp' %}active{% endif %}" id="pills-signup-tab" data-bs-toggle="pill" data-bs-target="#signup-tab" type="button">SIGNUP</button>
        </li>
    </ul>
    
    <div class="tab-content" id="pills-tabContent">
        
        <div class="tab-pane fade {% if not step or step == 'init' %}show active{% endif %}" id="login-tab" role="tabpanel">
            <form method="POST">
                <input type="hidden" name="action" value="login">
                <div class="mb-3">
                    <label class="form-label text-white">Phone or Email</label>
                    <div class="input-group">
                        <span class="input-group-text bg-dark border-secondary text-light"><i class="fas fa-user"></i></span>
                        <input type="text" name="login_id" class="form-control" placeholder="Enter credentials" required>
                    </div>
                </div>
                <div class="mb-4">
                    <label class="form-label text-white">Password</label>
                    <div class="input-group">
                        <span class="input-group-text bg-dark border-secondary text-light"><i class="fas fa-lock"></i></span>
                        <input type="password" name="password" class="form-control" placeholder="Enter password" required>
                    </div>
                </div>
                <button type="submit" class="btn btn-neon w-100 py-2">LOGIN NOW</button>
            </form>
        </div>

        <div class="tab-pane fade {% if step == 'verify_otp' %}show active{% endif %}" id="signup-tab" role="tabpanel">
            
            {% if step == 'init' or not step %}
            <form method="POST">
                <input type="hidden" name="action" value="signup_init">
                
                <div class="mb-3">
                    <label class="form-label text-white">Full Name</label>
                    <div class="input-group">
                        <span class="input-group-text bg-dark border-secondary text-light"><i class="fas fa-user-tag"></i></span>
                        <input type="text" name="name" class="form-control" placeholder="Enter your full name" required>
                    </div>
                </div>

                <div class="mb-3">
                    <label class="form-label text-white">Phone Number</label>
                    <div class="input-group">
                        <span class="input-group-text bg-dark border-secondary text-light"><i class="fas fa-phone"></i></span>
                        <input type="tel" name="phone" class="form-control" placeholder="01xxxxxxxxx" pattern="01[0-9]{9}" required>
                    </div>
                    <small class="text-white">Must be 11 digits (BD Number)</small>
                </div>
                
                <div class="mb-4">
                    <label class="form-label text-white">Email Address</label>
                    <div class="input-group">
                        <span class="input-group-text bg-dark border-secondary text-light"><i class="fas fa-envelope"></i></span>
                        <input type="email" name="email" class="form-control" placeholder="name@example.com" required>
                    </div>
                </div>
                
                <button type="submit" class="btn btn-neon w-100 py-2">SEND OTP</button>
            </form>

            {% elif step == 'verify_otp' %}
            <div class="alert alert-info text-center">
                <i class="fas fa-paper-plane"></i> OTP sent to your email!<br>
                <small>(Check Spam/Junk folder if not in Inbox)</small>
            </div>
            
            <form method="POST">
                <input type="hidden" name="action" value="verify_otp">
                
                <div class="mb-3">
                    <label class="form-label text-white">Enter OTP Code</label>
                    <input type="text" name="otp" class="form-control text-center text-neon fw-bold" 
                           style="letter-spacing: 5px; font-size: 1.5rem;" placeholder="XXXXXX" required>
                </div>
                
                <div class="mb-4">
                    <label class="form-label text-white">Create Password</label>
                    <div class="input-group">
                        <span class="input-group-text bg-dark border-secondary text-light"><i class="fas fa-key"></i></span>
                        <input type="password" name="password" class="form-control" placeholder="Set a new password" required>
                    </div>
                </div>
                
                <button type="submit" class="btn btn-neon w-100 py-2">VERIFY & CREATE ACCOUNT</button>
            </form>
            {% endif %}
            
        </div>
    </div>
</div>
{% endblock %}